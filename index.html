<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>avcpp: AvCpp &lt;a href=&quot;https://github.com/h4tr3d/avcpp/actions/workflows/cmake-ci.yml&quot;&gt;&lt;img src=&quot;https://github.com/h4tr3d/avcpp/actions/workflows/cmake-ci.yml/badge.svg&quot; alt=&quot;Build Status&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://github.com/h4tr3d/avcpp/security/code-scanning&quot;&gt;&lt;img src=&quot;https://github.com/h4tr3d/avcpp/actions/workflows/codeql.yml/badge.svg&quot; alt=&quot;CodeQL C++&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://makeapullrequest.com&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/PRs-welcome-brightgreen.svg&quot; alt=&quot;PRs Welcome&quot;/&gt;&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">avcpp
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Wrapper for the FFmpeg that simplify usage from C++ projects.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">AvCpp <a href="https://github.com/h4tr3d/avcpp/actions/workflows/cmake-ci.yml"><img src="https://github.com/h4tr3d/avcpp/actions/workflows/cmake-ci.yml/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/h4tr3d/avcpp/security/code-scanning"><img src="https://github.com/h4tr3d/avcpp/actions/workflows/codeql.yml/badge.svg" alt="CodeQL C++" style="pointer-events: none;" class="inline"/></a> <a href="https://makeapullrequest.com"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs Welcome" style="pointer-events: none;" class="inline"/></a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> Wrapper for the FFmpeg that simplify usage it from C++ projects.</p>
<p>Currently covered next functionality:</p>
<ul>
<li>Core helper &amp; utility classes (<code>AVFrame</code> → <code>av::AudioSample</code> &amp; <code><a class="el" href="classav_1_1VideoFrame.html">av::VideoFrame</a></code>, <code>AVRational</code> → <code><a class="el" href="classav_1_1Rational.html">av::Rational</a></code> and so on)</li>
<li>Container formats &amp; contexts muxing and demuxing</li>
<li>Codecs &amp; codecs contexts: encoding and decoding</li>
<li>Streams (<code>AVStream</code> → <code><a class="el" href="classav_1_1Stream.html">av::Stream</a></code>)</li>
<li>Filters (audio &amp; video): parsing from string, manual adding filters to the graph &amp; other</li>
<li>SW Video &amp; Audio resamplers</li>
</ul>
<p>You can read the full documentation <a href="https://h4tr3d.github.io/avcpp/">here</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Requirements</h1>
<ul>
<li>FFmpeg &gt;= 4.0<ul>
<li>libavformat &gt;= 58.x.x</li>
<li>libavcodec &gt;= 58.x.x</li>
<li>libavdevice &gt;= 58.x.x</li>
<li>libavfilter &gt;= 7.x.x</li>
<li>libavutil &gt;= 56.x.x</li>
<li>libswscale &gt;= 5.x.x</li>
<li>libswresample &gt;= 3.x.x</li>
<li>libpostproc &gt;= 55.x.x</li>
</ul>
</li>
<li>GCC &gt;= 9.0 (C++17 is required. <a href="https://gcc.gnu.org/projects/cxx-status.html#cxx17">See</a>, GCC from 6.0 may built code, but unchecked)</li>
<li>CMake (&gt; 3.19)</li>
</ul>
<blockquote class="doxtable">
<p>[!NOTE] Oldest versions of the FFmpeg (at least &gt;=2.0) may be successfully built and work but is it not checked for now. Same notes valid for the GCC version from 6.0. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md2"></a>
Debian, Ubuntu 19.10+ and Linux Mint 20.x or newer</h2>
<blockquote class="doxtable">
<p>[!NOTE]</p>
<p>Build verification done only for oldest Ubuntu version provided by the GitHub Flow. You can look it <a href="https://github.com/h4tr3d/avcpp/blob/master/.github/workflows/cmake-ci.yml#L25">here</a>. For now, it is 22.04. </p>
</blockquote>
<p>You should install FFmpeg packages from the deb-multimedia.org site:</p>
<div class="fragment"><div class="line">sudo apt-get install libavformat-dev \</div>
<div class="line">                     libavcodec-dev \</div>
<div class="line">                     libavutil-dev \</div>
<div class="line">                     libavfilter-dev \</div>
<div class="line">                     libswscale-dev \</div>
<div class="line">                     libswresample-dev \</div>
<div class="line">                     libpostproc-dev \</div>
<div class="line">                     libavdevice-dev</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>[!NOTE]</p>
<p><b>Note 1</b>: I did not test building on Debian. </p>
</blockquote>
<blockquote class="doxtable">
<p>[!NOTE]</p>
<p><b>Note 2</b>: Debian Wheezy repo contains only FFmpeg 1.0.8. I tested building only with ~2.x~ 4.0. So it is strongly recommended use Wheezy back-ports repo. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md3"></a>
Ubuntu 18.04 and Linux Mint 19.x</h2>
<p>If you are on Ubuntu bionic or Linux Mint 19.x you should add <a href="https://launchpad.net/~jonathonf/+archive/ubuntu/ffmpeg-4">ffmpeg-4</a> PPA:</p>
<div class="fragment"><div class="line">sudo add-apt-repository ppa:jonathonf/ffmpeg-4 -y</div>
<div class="line">sudo apt update &amp;&amp; sudo apt upgrade</div>
</div><!-- fragment --><p>After that just install the same packages as above.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md5"></a>
Build &amp; Usage</h1>
<h2><a class="anchor" id="autotoc_md6"></a>
Building with CMake</h2>
<div class="fragment"><div class="line">git clone --recurse-submodules https://github.com/h4tr3d/avcpp.git avcpp-git</div>
<div class="line">cd avcpp-git</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make -j8</div>
</div><!-- fragment --><p>If your Git version so old (refer to the <a href="https://stackoverflow.com/questions/3796927/how-to-git-clone-including-submodules">SO for clarification</a>) you can just replace <code>--recurse-submodules</code> with pair of <code>git submodule init &amp;&amp; git submodule update</code>.</p>
<p>If FFmpeg located in non-standard place:</p>
<div class="fragment"><div class="line">cmake -DPC_FFMPEG_LIBRARY_DIRS=&lt;some_path&gt; -DPC_FFMPEG_INCLUDE_DIRS=&lt;some_path&gt; ..</div>
</div><!-- fragment --><p>To point install prefix:</p>
<div class="fragment"><div class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr ..</div>
</div><!-- fragment --><p>Install:</p>
<div class="fragment"><div class="line">sudo make install</div>
</div><!-- fragment --><p>or (for packaging)</p>
<div class="fragment"><div class="line">sudo make DESTDIR=&lt;some_prefix&gt; install</div>
</div><!-- fragment --><p>Refer to CMake documentation for more details that can cover some special cases.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
Useful configure directives</h3>
<ul>
<li><code>AV_ENABLE_STATIC</code> - Bool, enable static library build, On by default.</li>
<li><code>AV_ENABLE_SHARED</code> - Bool, enable shared library build, On by default.</li>
<li><code>AV_BUILD_EXAMPLES</code> - Bool, enable examples build, On by default.</li>
<li><code>AV_BUILD_TESTS</code> - Bool, enable tests build, On by default.</li>
<li>C++ related<ul>
<li><code>CMAKE_CXX_STANDARD</code> - Can be defined globally to override default C++ version. C++17 required at least.</li>
</ul>
</li>
<li>FFmpeg related:<ul>
<li><code>FFMPEG_PKG_CONFIG_SUFFIX</code> - String, TBD</li>
<li><code>PC_&lt;component&gt;_LIBRARY_DIRS</code> - Path, hint where FFmpeg component library looking</li>
<li><code>PC_FFMPEG_LIBRARY_DIRS</code> - Path, hint where a whole FFmpeg libraries looking</li>
<li><code>PC_&lt;component&gt;_INCLUDE_DIRS</code> - Path, hint where a FFmpeg component includes looking</li>
<li><code>PC_FFMPEG_INCLUDE_DIRS</code> - Path, hint where a whole FFmpeg includes looking</li>
<li><code>&lt;component&gt;</code> are:<ul>
<li><code>AVCODEC</code></li>
<li><code>AVDEVICE</code></li>
<li><code>AVFORMAT</code></li>
<li><code>AVFILTER</code></li>
<li><code>AVUTIL</code></li>
<li><code>POSTPROC</code></li>
<li><code>SWSCALE</code></li>
<li><code>SWRESAMPLE</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Integrate to the CMake project as Git Submodule</h2>
<p>AvCpp can be simple integrated into CMake-based project as Git submodule.</p>
<p>Just do something like:</p>
<div class="fragment"><div class="line">git submodule add https://github.com/h4tr3d/avcpp.git 3rdparty/avcpp</div>
</div><!-- fragment --><p>And in the your <a class="el" href="CMakeLists_8txt.html">CMakeLists.txt</a>:</p>
<div class="fragment"><div class="line">add_subdirectory(3rdparty/avcpp)</div>
</div><!-- fragment --><p>AvCpp detects that it included as non-root projects and skips some steps, like installation.</p>
<p>CMake parameters pointed above may be sets before <code>add_subdirectory()</code>.</p>
<p>Than use via <code>target_link_libraries</code>:</p>
<div class="fragment"><div class="line">target_link_libraries(prog PRIVATE avcpp::avcpp)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
Integrate to the CMake project via FetchContent</h2>
<p>Just do in your <a class="el" href="CMakeLists_8txt.html">CMakeLists.txt</a>:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line">FetchContent_Declare(</div>
<div class="line">    avcpp</div>
<div class="line">    GIT_REPOSITORY https://github.com/h4tr3d/avcpp.git</div>
<div class="line">    GIT_TAG        v2.8.0</div>
<div class="line">)</div>
<div class="line">FetchContent_MakeAvailable(avcpp)</div>
</div><!-- fragment --><p>Than use via <code>target_link_libraries</code>:</p>
<div class="fragment"><div class="line">target_link_libraries(prog PRIVATE avcpp::avcpp)</div>
</div><!-- fragment --><p>CMake arguments can be set before <code>FetchContent_MakeAvailable</code> call:</p>
<div class="fragment"><div class="line">FetchContent_Declare(</div>
<div class="line">    avcpp</div>
<div class="line">    ...</div>
<div class="line">)</div>
<div class="line">set(AV_ENABLE_STATIC On)</div>
<div class="line">set(AV_ENABLE_SHARED Off)</div>
<div class="line">FetchContent_MakeAvailable(avcpp)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
Use via Vcpkg</h2>
<p>Just put into vcpkg.json:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;$schema&quot;: &quot;https://raw.githubusercontent.com/microsoft/vcpkg-tool/main/docs/vcpkg.schema.json&quot;,</div>
<div class="line">    &quot;dependencies&quot;: [</div>
<div class="line">        ...</div>
<div class="line">        &quot;avcpp&quot;,</div>
<div class="line">        ...</div>
<div class="line">    ],</div>
<div class="line">    &quot;name&quot;: &quot;your-app-name&quot;,</div>
<div class="line">    &quot;version-string&quot;: &quot;0.0.1&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Than in the your <a class="el" href="CMakeLists_8txt.html">CMakeLists.txt</a>:</p>
<div class="fragment"><div class="line">find_package(avcpp CONFIG REQUIRED)</div>
<div class="line">target_link_libraries(prog PRIVATE avcpp::avcpp)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md11"></a>
Building with Meson</h2>
<blockquote class="doxtable">
<p>[!CAUTION]</p>
<p>CMake usage strongly recommended. Meson build has no maintainer and broken for the last code. It is excluded from the CI builds. </p>
</blockquote>
<p>Before you can begin with the building you have to clone the repository like this:</p>
<div class="fragment"><div class="line">git clone https://github.com/h4tr3d/avcpp.git avcpp-git</div>
<div class="line">cd avcpp-git</div>
</div><!-- fragment --><p>IDE Integration:</p>
<p>There are extentions for various IDEs like VS Code/Codium, Eclipse, Xcode, etc. Refer to the <a href="https://mesonbuild.com/IDE-integration.html">docs</a> for more information.</p>
<p>Building the project:</p>
<p>If you don't have the dependencies installed, meson will download and compile them. Because ffmpeg is so large (~2000 c files), you should consider using your package manager to install them. You can then build the project with the following commands:</p>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">meson ..</div>
<div class="line">meson compile</div>
</div><!-- fragment --><p>Configuring the project:</p>
<p>By default the sample projects and the test are compiled. If you don't want this you can disable it with the following commands:</p>
<div class="fragment"><div class="line">meson configure -Dbuild_tests=false</div>
<div class="line">meson configure -Dbuild_samples=false</div>
</div><!-- fragment --><p>You can set the install prefix using <code>meson --prefix &lt;your/own/prefix&gt;</code>. To see all of the available options just type <code>meson configure</code> and <code>meson configure --help</code> to get more information.</p>
<p>Installing the project:</p>
<p>Just type <code>meson install</code> and the project will be installed in the configured prefix (/usr/local by default).</p>
<p>Running the tests:</p>
<p>To run the test just use <code>meson test</code>. If you disabled the test this will do nothing. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
